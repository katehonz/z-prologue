# Обработка на грешки в Prologue

Prologue предоставя мощна и гъвкава система за обработка на грешки, която позволява дефиниране на собствени error handler-и, кастъм страници за грешки и централизирано логване.

---

## Основни концепции

- **Error Handler:** Процедура, която се изпълнява при определена HTTP грешка (404, 500 и др.).
- **Глобална таблица за грешки:** Позволява регистриране на handler-и за различни HTTP кодове.
- **Кастъм страници:** Можеш да върнеш HTML, JSON или друг отговор при грешка.

---

## Пример: Дефиниране на собствен error handler

```nim
proc custom404(ctx: Context) {.async.} =
  resp "<h1>Страницата не е намерена!</h1>", code = Http404

app.registerErrorHandler(Http404, custom404)
```

---

## Централизирано логване на грешки

Можеш да използваш middleware за логване на всички грешки:

```nim
proc errorLogger(ctx: Context) {.async.} =
  if ctx.response.code >= 400:
    echo "Грешка: ", ctx.response.code, " - ", ctx.response.body
  await switch(ctx)

app.use(errorLogger)
```

---

## Вградени страници за грешки

Prologue има готови шаблони за 404 и 500 грешки, които можеш да персонализираш.

---

## Практически съвети

- Регистрирай handler-и за най-честите HTTP кодове (404, 401, 500 и др.).
- Използвай логване за лесно откриване на проблеми в продукция.
- Можеш да върнеш различен отговор според типа на заявката (HTML, JSON, текст).

---

За повече информация виж модулите `core/httpexception.nim` и `core/application.nim` или попитай за конкретни примери!
