# Сесии и Flash съобщения в Prologue

Prologue предоставя вградена поддръжка за сесии и flash съобщения, които позволяват съхранение на състояние между заявките и изпращане на краткотрайни нотификации към потребителя.

---

## Основни концепции

- **Сесия (Session):** Позволява съхраняване на данни за всеки потребител между различни заявки.
- **Flash съобщения:** Еднократни съобщения (например за успех или грешка), които се показват при следващата заявка.

---

## Пример: Използване на сесии

```nim
proc login(ctx: Context) {.async.} =
  ctx.session["userId"] = "42"
  resp "<h1>Успешен вход!</h1>"

proc profile(ctx: Context) {.async.} =
  let userId = ctx.session.getOrDefault("userId", "Гост")
  resp "<h1>Профил на потребител: " & userId & "</h1>"
```

---

## Пример: Flash съобщения

```nim
proc register(ctx: Context) {.async.} =
  ctx.flash("Регистрацията е успешна!", category = Info)
  redirect("/login")

proc login(ctx: Context) {.async.} =
  let msg = ctx.getMessage(Info)
  resp "<h1>Вход</h1>" & (if msg.isSome: "<p>" & msg.get & "</p>" else: "")
```

---

## Практически съвети

- Използвай сесиите за автентикация, настройки на потребителя и други данни, които трябва да се пазят между заявките.
- Flash съобщенията са подходящи за показване на еднократни нотификации след пренасочване (redirect).
- Не съхранявай чувствителни данни в сесията без криптиране!

---

За повече информация виж модула `core/types.nim` и `core/context.nim` или попитай за напреднали примери!
